add some changes in m6